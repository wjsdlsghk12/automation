
# Instagram 자동화 테스트

## 개요
이 프로젝트는 Appium과 Cucumber를 사용하여 Instagram에서 특정 동작을 자동화하는 테스트를 다룹니다. 자동화 테스트는 두 가지 주요 테스트 케이스를 포함합니다:

1. **테스트 케이스 1 (TC1)**: Instagram에서 링크를 클릭했을 때 ABLOG 앱이 설치되는 스토어 페이지로 이동하는지 확인.
2. **테스트 케이스 2 (TC2)**: Instagram에서 링크를 클릭했을 때 ABLOG 앱이 실행되는지 확인 (앱이 설치되어 있지 않으면 스토어로 이동해야 함).

## 사용된 기술
- **Appium**: 모바일 자동화를 위한 툴.
- **Cucumber**: BDD(행위 주도 개발) 테스트를 위한 프레임워크.
- **Java**: 자동화 코드를 작성한 프로그래밍 언어.
- **Slack API**: 테스트 실행 후 Slack에 결과를 전송하기 위한 API.
- **Jsoup**: Cucumber HTML 리포트를 수정하여 비디오 녹화 파일을 추가하기 위해 사용.

## 설정 방법

1. **레포지토리 클론**: 해당 레포지토리를 로컬로 클론합니다.

2. **의존성 설치**:
   - Java 11 이상이 설치되어 있는지 확인합니다.
   - Appium을 설치하고 Android 설정을 완료합니다.
   - Maven 또는 Gradle을 사용하여 Cucumber 및 기타 의존성을 설치합니다.

3. **환경 설정**:
   - 테스트 시도 횟수(`attempt`) 값은 build.gradle의 maxRetries 변수에 설정합니다.
   - 테스트를 실행할 Android 디바이스 또는 에뮬레이터가 준비되어 있어야 합니다.

## 테스트 케이스 실행

### 테스트 케이스 1: Instagram에서 ABLOG 스토어로 이동하는 링크 클릭

1. **Instagram 오픈**: 테스트가 Android 디바이스에서 Instagram을 엽니다.
2. **프로필 수정**: 프로필에 특정 링크를 추가합니다.
3. **링크 클릭**: 추가한 링크를 클릭하여 ABLOG 스토어로 이동합니다.
4. **스토어 리디렉션 확인**: ABLOG 앱의 설치 페이지가 구글 플레이 스토어에서 열리는지 확인합니다.

### 테스트 케이스 2: Instagram에서 ABLOG 앱 실행 확인

1. **Instagram 오픈**: Instagram을 열고 특정 테스트 웹페이지로 이동합니다.
2. **프로필 수정**: 프로필에 특정 링크를 추가합니다.
3. **PlayStore 링크 클릭**: 이동된 링크에서 PlayStore 링크를 찾아서 클릭합니다.
4. **링크 클릭**: 링크를 클릭하여 ABLOG 앱이 실행되는지 확인합니다.
5. **앱 스토어로 리디렉션 확인**: ABLOG 앱이 설치되어 있지 않으면 앱 스토어로 리디렉션되어야 합니다.

## 실행 방법

1. **테스트 실행**: 아래 명령어로 테스트를 실행합니다.
   ```bash
   ./gradlew cucumberCli
   ```

2. **비디오 녹화**: 테스트가 실행되는 동안 화면을 자동으로 녹화하며, 비디오 파일은 `target/video/{attempt}/` 디렉토리에 저장됩니다.

3. **리포트 확인**: 테스트 실행 후 상세 HTML 리포트가 `target/cucumber-report-{attempt}.html`에 생성됩니다.

4. **Slack 알림**: 테스트 결과는 `SlackMessageSender` 클래스를 통해 Slack으로 전송됩니다. 리포트에 대한 링크가 포함된 버튼이 메시지로 전송됩니다.

5. **리포트 스크립트 수정**: 테스트 리포트에는 각 시나리오에 대한 비디오 녹화를 포함할 수 있도록 `AddScriptToCucumberReport` 클래스에서 리포트를 수정하는 스크립트가 추가됩니다.

## 고려사항
- 테스트는 독립적으로 실행할 수 있도록 설계되어 있어, 각각 단독으로 또는 함께 실행할 수 있습니다.
- 테스트는 앱이 설치되지 않은 경우도 처리하며, 실패한 시도 후 재시도할 수 있도록 설계되었습니다.
- 비디오 녹화가 Cucumber 리포트에 포함되어 결과를 쉽게 리뷰할 수 있습니다.
- 코드에는 각 주요 섹션에 대해 주석이 달려 있어 이해가 용이합니다.

## 참고사항
- Slack Webhook URL은 `SlackMessageSender` 클래스에서 수정해야 합니다.

## 결론
이 프로젝트는 Instagram에서 링크를 클릭하는 동작을 자동화하여 ABLOG 앱 또는 앱 스토어로의 리디렉션을 확인합니다. 테스트는 다양한 실패 상황을 처리하며, 비디오 녹화와 Slack 알림을 포함하여 테스트 결과를 쉽게 추적할 수 있습니다.

추가 질문이나 도움이 필요하면 언제든지 연락 주세요.
